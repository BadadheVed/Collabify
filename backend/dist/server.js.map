{"version":3,"file":"server.js","names":["require","_express","_interopRequireDefault","_cookieParser","_cors","_dotenv","_http","_sockets","_auth","_dashboard","_teams","_document","_tasks","_notification","_project","_liveblocks","e","__esModule","dotenv","config","app","express","server","createServer","initSocketServer","use","json","cookieParser","furl","process","env","FRONTEND_URL","cors","origin","credentials","methods","allowedHeaders","LoginRouter","dashboard","teamRouter","documentRouter","taskRouter","notificationRouter","projectRouter","liveblocksRouter","PORT","Number","listen","console","log","concat"],"sources":["../src/server.ts"],"sourcesContent":["import \"module-alias/register\";\r\nimport express from \"express\";\r\nimport cookieParser from \"cookie-parser\";\r\nimport cors from \"cors\";\r\nimport dotenv from \"dotenv\";\r\nimport { createServer } from \"http\";\r\n\r\n// Load environment variables first\r\ndotenv.config();\r\n\r\nconst app = express();\r\n\r\n// Create HTTP server\r\nconst server = createServer(app);\r\n\r\n// Initialize Socket.io BEFORE importing routes\r\nimport { initSocketServer } from \"./sockets\";\r\ninitSocketServer(server);\r\n\r\n// MOVE ALL ROUTE IMPORTS HERE (after Socket.io init)\r\nimport LoginRouter from \"./router/auth.routes\";\r\nimport dashboard from \"./router/dashboard\";\r\nimport teamRouter from \"./router/teams.routes\";\r\nimport documentRouter from \"./router/document.routes\";\r\nimport taskRouter from \"./router/tasks.routes\";\r\nimport notificationRouter from \"./router/notification.routes\";\r\nimport projectRouter from \"./router/project.routes\";\r\nimport liveblocksRouter from \"./router/liveblocks.route\";\r\n\r\napp.use(express.json());\r\napp.use(cookieParser());\r\n\r\nconst furl = process.env.FRONTEND_URL;\r\napp.use(\r\n  cors({\r\n    origin: [\r\n      furl as string,\r\n      \"http://localhost:3000\",\r\n      \"https://collabify-site.vercel.app\",\r\n    ],\r\n    credentials: true,\r\n    methods: [\"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\", \"OPTIONS\"],\r\n    allowedHeaders: [\r\n      \"Content-Type\",\r\n      \"Authorization\",\r\n      \"Accept\",\r\n      \"X-Requested-With\",\r\n    ],\r\n  })\r\n);\r\n\r\napp.use(\"/auth\", LoginRouter);\r\napp.use(\"/dashboard\", dashboard);\r\napp.use(\"/teams\", teamRouter);\r\napp.use(\"/documents\", documentRouter);\r\napp.use(\"/tasks\", taskRouter);\r\napp.use(\"/notifications\", notificationRouter);\r\napp.use(\"/projects\", projectRouter);\r\napp.use(\"/liveblocks\", liveblocksRouter);\r\n\r\nconst PORT = Number(process.env.PORT) || 5000;\r\n\r\n// FIXED: Added '0.0.0.0' host binding for Render\r\nserver.listen(PORT, \"0.0.0.0\", () => {\r\n  console.log(`Listening On The Port ${PORT}`);\r\n});\r\n"],"mappings":";;AAAAA,OAAA;AACA,IAAAC,QAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,aAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,KAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,OAAA,GAAAH,sBAAA,CAAAF,OAAA;AACA,IAAAM,KAAA,GAAAN,OAAA;AAWA,IAAAO,QAAA,GAAAP,OAAA;AAIA,IAAAQ,KAAA,GAAAN,sBAAA,CAAAF,OAAA;AACA,IAAAS,UAAA,GAAAP,sBAAA,CAAAF,OAAA;AACA,IAAAU,MAAA,GAAAR,sBAAA,CAAAF,OAAA;AACA,IAAAW,SAAA,GAAAT,sBAAA,CAAAF,OAAA;AACA,IAAAY,MAAA,GAAAV,sBAAA,CAAAF,OAAA;AACA,IAAAa,aAAA,GAAAX,sBAAA,CAAAF,OAAA;AACA,IAAAc,QAAA,GAAAZ,sBAAA,CAAAF,OAAA;AACA,IAAAe,WAAA,GAAAb,sBAAA,CAAAF,OAAA;AAAyD,SAAAE,uBAAAc,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AApBzD;AACAE,kBAAM,CAACC,MAAM,CAAC,CAAC;AAEf,IAAMC,GAAG,GAAG,IAAAC,mBAAO,EAAC,CAAC;;AAErB;AACA,IAAMC,MAAM,GAAG,IAAAC,kBAAY,EAACH,GAAG,CAAC;;AAEhC;;AAEA,IAAAI,yBAAgB,EAACF,MAAM,CAAC;;AAExB;;AAUAF,GAAG,CAACK,GAAG,CAACJ,mBAAO,CAACK,IAAI,CAAC,CAAC,CAAC;AACvBN,GAAG,CAACK,GAAG,CAAC,IAAAE,wBAAY,EAAC,CAAC,CAAC;AAEvB,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,YAAY;AACrCX,GAAG,CAACK,GAAG,CACL,IAAAO,gBAAI,EAAC;EACHC,MAAM,EAAE,CACNL,IAAI,EACJ,uBAAuB,EACvB,mCAAmC,CACpC;EACDM,WAAW,EAAE,IAAI;EACjBC,OAAO,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAC;EAC7DC,cAAc,EAAE,CACd,cAAc,EACd,eAAe,EACf,QAAQ,EACR,kBAAkB;AAEtB,CAAC,CACH,CAAC;AAEDhB,GAAG,CAACK,GAAG,CAAC,OAAO,EAAEY,gBAAW,CAAC;AAC7BjB,GAAG,CAACK,GAAG,CAAC,YAAY,EAAEa,qBAAS,CAAC;AAChClB,GAAG,CAACK,GAAG,CAAC,QAAQ,EAAEc,iBAAU,CAAC;AAC7BnB,GAAG,CAACK,GAAG,CAAC,YAAY,EAAEe,oBAAc,CAAC;AACrCpB,GAAG,CAACK,GAAG,CAAC,QAAQ,EAAEgB,iBAAU,CAAC;AAC7BrB,GAAG,CAACK,GAAG,CAAC,gBAAgB,EAAEiB,wBAAkB,CAAC;AAC7CtB,GAAG,CAACK,GAAG,CAAC,WAAW,EAAEkB,mBAAa,CAAC;AACnCvB,GAAG,CAACK,GAAG,CAAC,aAAa,EAAEmB,sBAAgB,CAAC;AAExC,IAAMC,IAAI,GAAGC,MAAM,CAACjB,OAAO,CAACC,GAAG,CAACe,IAAI,CAAC,IAAI,IAAI;;AAE7C;AACAvB,MAAM,CAACyB,MAAM,CAACF,IAAI,EAAE,SAAS,EAAE,YAAM;EACnCG,OAAO,CAACC,GAAG,0BAAAC,MAAA,CAA0BL,IAAI,CAAE,CAAC;AAC9C,CAAC,CAAC","ignoreList":[]}